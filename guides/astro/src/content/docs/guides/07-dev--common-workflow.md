---
title: Development - Common Workflow
description: How to work in this project on a daily basis? Here you will find which script to run...
---

This page explains which are the workflows that you can do to develop the app.  

## Registry Items

This includes creating, updating, removing, and testing registry items.


### Add a registry item

Adding a registry item involves creating a typescript file with utility code inside, a test file and an example file.  
Then the item must be added to the registry input file.  

:::note
In this example, we add a `logger` item.
:::

The process, in short is:
1. Create files (main code, example, test)
2. Add the item to the registry array

#### Create Main Code file

This file is **required**.  
It contains the code for the item.  

*Location*:
```bash
next-app/registry/input/items/logger.ts
```
*Content*:
```ts
// example content
export const logger = (message: string) => {
  // ...
}
```
#### Create Example file

This file is **requried**, and must be a markdown file (.md).  
This markdown will be rendered on the documentation page, under "Example Usage" section.  

*Location*:
```bash
next-app/registry/input/items/logger.example.md
```
*Content*:

We extended the markdown with some new blocks or special behavior, to make it more usable.  
Read our guide at  
`next-app/src/components/mine/markdown-renderer/server-component/readme.md`.

#### Create Test file

This file is **optional**, and must be a typescript file (*.test.ts).

*Location*:
```bash
next-app/registry/input/items/logger.test.ts
```
#### Add the item to the registry input file

The regitry input file is
```bash
next-app/registry/input/registry.input.json
```

You must add the item to the items array.
```json
{
  "items": [
    // other items
    {
      // name of the item, prefixed with util-
      "name": "util-array", 
      "categories": [
        "utility"
      ],
      "type": "registry:file",
      // page title of the item documentation page
      "title": "Array", 
      // page description of the item documentation page
      "description": "Utilities for working with arrays.", 
        // only code files must be added here.
        // test and example are automatically read
      "files": [
        {
          "type": "registry:file",
          // where the file is located in the disk
          "path": "registry/input/items/utility/array.ts",
          // where the file will placed in the consumer project
          // when he run npx shadcn@latest add [registry-item-name]
          "target": "utils/array.ts"
        }
      ]
    }
  ]
}
```

### Update a registry item

Updating a registry itemm involves cretinf a typescript file with utility code inside, a test file, and an example file.  

1. Follow the steps of adding a registry item
1. Edit the item main-code files


### Remove an item

Removing a registry itemm involves deleting the item from the registry input file, and all item files (main-code, test, example).  

Steps:
1. Remove the item from `next-app/registry/input/registry.input.json` items array
1. Delete item files from `next-app/registry/input/items`
1. Then when you re-run the next.js app, the item will be removed from the registry

### Test Registry Items

This run each item `*.test.ts` file with Vitest.  

1. Open new terminal
1. Go to `next-app`
   
   ```bash
   cd next-app
   ```
1. Run tests
   
   ```bash
   pnpm registry:test
   ```

### Generate Registry Public Files

:::note
These files are used only by the shadcn cli in consumer-land.  
The next.js app, in order to build pages (generateStaticParams), doesn't use these file, but use (registry/output-reader).
:::

These files are the input used by the consumer-land shadcn-cli command to install registry items in the consumer project.  
These file are served as static assets by next.js (public/r/[name].json), so they are publicly available and accessible witha GET request like `http://server.domain/r/[name].json`.  

During `prod:build`, these files are generated by the npm script `registry:generate` before the `next build`.  
During `dev:next`, these files are not generated automatically, if you want to generate them run `registry:generate` manually.


## Next.js Documentation Website

### Launch next js dev server


1. Open new terminal
1. Go to `next-app`  
   
   ```bash
   cd next-app
   ```
1. Create dotenv file  
   
   :::tip
   You need to do it if you don't have it
   :::

   ```bash
   # create the file
   cp .env.development.local.example .env.development.local

   # then set inside the file
   APP_DATA_MODE=compute
   ```
1. Install dependencies  
   
   ```bash
   pnpm install
   ```
1. Run dev server  
   
   ```bash
   pnpm dev:next
   ```

### Test react rerender on next js with react scan

This launch the Next.js website with [react scan](https://react-scan.com/), used to check why comoponents are re-rendering.

1. Open new terminal
1. Go to `next-app`  
   
   ```bash
   cd next-app
   ```
2. Choose if you want to use dev or prod-simulate build
    - `development` version
      
       ```bash
        pnpm dev:next:react-scan
       ```
    - `prod-simulate` version
      
       ```bash
        pnpm prod-simulate:next:react-scan
       ```

### Launch a Production Simulated version


1. Open new terminal
1. Go to `next-app`  
   
   ```bash
   cd next-app
   ```
1. Create dotenv file  
   
   :::tip
   You need to do it if you don't have it
   :::

   ```bash
   # create the file
   cp .env.prod-simulate.local.example .env.prod-simulate.local

   # then set inside the file
   APP_DATA_MODE=compute
   ```
1. Install dependencies  
   
   ```bash
   pnpm install
   ```
1. Run dev server  
   
   ```bash
   pnpm prod-simulate:next
   ```


## Astro Developer Documentation

This Astro website is the Developer Documentation, and it's the webiste you are reading now.

### Launch Astro Dev Server

1. Open a new terminal
1. Go to `guides/astro`  
   
   ```bash
   cd guides/astro
   ```
1. Install dependencies  
   
   ```bash
   npm install
   ```
1. Run dev server  
   
   ```bash
   npm dev:astro
   ```

### Update dev docs

1. [Launch astro dev server](#launch-astro-dev-server)
2. Go to `guides/astro/src/content/docs`
3. Edit markdown files. Astro will refresh on save